{"ast":null,"code":"var _jsxFileName = \"C:\\\\OpenServer\\\\domains\\\\123\\\\client\\\\src\\\\pages\\\\MainPage.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useHttp } from \"../hooks/http.hook\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const MainPageCart = _ref => {\n  _s();\n\n  let {\n    data\n  } = _ref;\n\n  const link = id => {\n    return \"/apartmen/\" + id;\n  };\n\n  const name = data => {\n    switch (data.rooms) {\n      case 1:\n        return 'Однокомнатная квартира';\n\n      case 2:\n        return 'Двухкомнатная квартира';\n\n      case 3:\n        return 'Трехкомнатная квартира';\n\n      case 4:\n        return 'Четырехкомнатная квартира';\n    }\n  };\n\n  const price = str => {\n    return str.replace(/(\\d{1,3}(?=(?:\\d\\d\\d)+(?!\\d)))/g, \"$1\" + \" \");\n  };\n\n  const [currentPage, setCurrentPage] = useState(1);\n  const [perPage] = useState(6);\n  const LastIndex = currentPage * perPage;\n  const FirstIndex = LastIndex - perPage;\n  let current = data.slice(FirstIndex, LastIndex);\n\n  const paginate = pageNumber => setCurrentPage(pageNumber);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"nav-wrapper colormenu menu\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            class: \"brand-logo logou\",\n            src: \"https://static.tildacdn.com/tild3738-3866-4537-a335-363534343034/__white.png\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 36,\n            columnNumber: 35\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"row marginT\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"col s3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\u0421\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u043E:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          class: \"browser-default\",\n          value: this.state.sortBy,\n          onChange: this.updateValue,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"1\",\n            children: \"\\u0426\\u0435\\u043D\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"2\",\n            children: \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u0443 \\u043A\\u043E\\u043C\\u043D\\u0430\\u0442\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"3\",\n            children: \"Option 3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"switch\",\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"Off\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 51,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              class: \"lever\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 25\n            }, this), \"On\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"col s9\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"row\",\n          children: current.map(apartmen => /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"col s12 m6 l4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"row centre\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"col s12 m7\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"card\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"product-wrap\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      class: \"product-item\",\n                      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                        src: apartmen.layout_image\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 66,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        class: \"product-buttons\",\n                        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                          href: link(apartmen.id),\n                          class: \"button\",\n                          children: \"\\u043F\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0435\\u0442\\u044C\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 68,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          class: \"white-text\",\n                          children: [apartmen.floor, \" \\u044D\\u0442\\u0430\\u0436\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 69,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          class: \"white-text\",\n                          children: [\"\\u041A\\u0432\\u0430\\u0440\\u0442\\u0438\\u0440\\u0430 \\u2116\", apartmen.id]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 70,\n                          columnNumber: 53\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 67,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 65,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      class: \"product-title\",\n                      children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                        children: name(apartmen)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 74,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        class: \"product-price\",\n                        children: [\"\\u20BD \", price(apartmen.price.toString())]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 75,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 73,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 64,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 63,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 62,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 25\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n          perPage: perPage,\n          total: data.length,\n          paginate: paginate,\n          currentPage: currentPage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 14\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 9\n  }, this);\n};\n\n_s(MainPageCart, \"yKLVKM3R4ZZOerqW5LVOWJ9/SDo=\");\n\n_c = MainPageCart;\nexport const Pagination = _ref2 => {\n  let {\n    perPage,\n    total,\n    paginate,\n    currentPage\n  } = _ref2;\n  const pageNumber = [];\n\n  for (let i = 1; i <= Math.ceil(total / perPage); i++) {\n    pageNumber.push(i);\n  }\n\n  const getClass = number => {\n    return currentPage == number ? 'active' : 'waves-effect';\n  };\n\n  const next = () => {\n    return currentPage == pageNumber[pageNumber.length - 1] ? paginate(1) : paginate(currentPage + 1);\n  };\n\n  const back = () => {\n    return currentPage == 1 ? paginate(pageNumber[pageNumber.length - 1]) : paginate(currentPage - 1);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"ul\", {\n    class: \"pagination flexrow\",\n    children: [/*#__PURE__*/_jsxDEV(\"li\", {\n      class: \"waves-effect\",\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"#!\",\n        onClick: () => back(),\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"https://ru.seaicons.com/wp-content/uploads/2015/06/Arrows-Forward-icon.png\",\n          class: \"arrowR\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 76\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 42\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }, this), pageNumber.map(number => /*#__PURE__*/_jsxDEV(\"li\", {\n      class: getClass(number),\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"#!\",\n        onClick: () => paginate(number),\n        children: number\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 64\n      }, this)\n    }, number, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 21\n    }, this)), /*#__PURE__*/_jsxDEV(\"li\", {\n      class: \"waves-effect\",\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"#!\",\n        onClick: () => next(),\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"https://ru.seaicons.com/wp-content/uploads/2015/06/Arrows-Forward-icon.png\",\n          class: \"arrowL\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 76\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 42\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 13\n  }, this);\n};\n_c2 = Pagination;\nexport const MainPage = () => {\n  _s2();\n\n  const {\n    request,\n    loading\n  } = useHttp();\n  const [data, setData] = useState(null);\n  const navigate = useNavigate();\n  const getDataAll = useCallback(async () => {\n    try {\n      const fetched = await request('/api/all', 'GET', null, {});\n      setData(fetched);\n    } catch (e) {}\n  }, [request]);\n  useEffect(() => {\n    getDataAll();\n  }, [getDataAll]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: !loading && data && /*#__PURE__*/_jsxDEV(MainPageCart, {\n      data: data\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 34\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 9\n  }, this);\n};\n\n_s2(MainPage, \"0O5NewuMq7Jj81fJLBuFjqTma8g=\", false, function () {\n  return [useHttp, useNavigate];\n});\n\n_c3 = MainPage;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"MainPageCart\");\n$RefreshReg$(_c2, \"Pagination\");\n$RefreshReg$(_c3, \"MainPage\");","map":{"version":3,"sources":["C:/OpenServer/domains/123/client/src/pages/MainPage.js"],"names":["React","useCallback","useEffect","useState","useHttp","useNavigate","MainPageCart","data","link","id","name","rooms","price","str","replace","currentPage","setCurrentPage","perPage","LastIndex","FirstIndex","current","slice","paginate","pageNumber","state","sortBy","updateValue","map","apartmen","layout_image","floor","toString","length","Pagination","total","i","Math","ceil","push","getClass","number","next","back","MainPage","request","loading","setData","navigate","getDataAll","fetched","e"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAcC,WAAd,EAA2BC,SAA3B,EAAsCC,QAAtC,QAAqD,OAArD;AACA,SAASC,OAAT,QAAwB,oBAAxB;AACA,SAASC,WAAT,QAA4B,kBAA5B;;AAGA,OAAO,MAAMC,YAAY,GAAG,QAAY;AAAA;;AAAA,MAAX;AAACC,IAAAA;AAAD,GAAW;;AACpC,QAAMC,IAAI,GAAIC,EAAD,IAAO;AAAC,WAAO,eAAaA,EAApB;AAAwB,GAA7C;;AACA,QAAMC,IAAI,GAAIH,IAAD,IAAS;AAClB,YAAOA,IAAI,CAACI,KAAZ;AAEI,WAAK,CAAL;AACI,eAAO,wBAAP;;AACJ,WAAK,CAAL;AACI,eAAO,wBAAP;;AACJ,WAAK,CAAL;AACI,eAAO,wBAAP;;AACJ,WAAK,CAAL;AACI,eAAO,2BAAP;AATR;AAWH,GAZD;;AAaA,QAAMC,KAAK,GAAIC,GAAD,IAAQ;AAAC,WAAOA,GAAG,CAACC,OAAJ,CAAY,iCAAZ,EAA+C,OAAO,GAAtD,CAAP;AAAmE,GAA1F;;AAEA,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCb,QAAQ,CAAC,CAAD,CAA9C;AACA,QAAM,CAACc,OAAD,IAAYd,QAAQ,CAAC,CAAD,CAA1B;AAEA,QAAMe,SAAS,GAAGH,WAAW,GAAGE,OAAhC;AACA,QAAME,UAAU,GAAGD,SAAS,GAAGD,OAA/B;AACA,MAAIG,OAAO,GAAGb,IAAI,CAACc,KAAL,CAAWF,UAAX,EAAsBD,SAAtB,CAAd;;AAEA,QAAMI,QAAQ,GAAGC,UAAU,IAAIP,cAAc,CAACO,UAAD,CAA7C;;AAEA,sBACI;AAAA,4BACI;AAAA,6BACI;AAAK,QAAA,KAAK,EAAC,4BAAX;AAAA,+BACI;AAAG,UAAA,IAAI,EAAG,GAAV;AAAA,iCAAc;AAAK,YAAA,KAAK,EAAC,kBAAX;AAA8B,YAAA,GAAG,EAAC;AAAlC;AAAA;AAAA;AAAA;AAAA;AAAd;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADJ,eAOI;AAAK,MAAA,KAAK,EAAC,aAAX;AAAA,8BACI;AAAK,QAAA,KAAK,EAAC,QAAX;AAAA,gCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAQ,UAAA,KAAK,EAAC,iBAAd;AAAgC,UAAA,KAAK,EAAG,KAAKC,KAAL,CAAWC,MAAnD;AAA4D,UAAA,QAAQ,EAAG,KAAKC,WAA5E;AAAA,kCACI;AAAQ,YAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAQ,YAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAGI;AAAQ,YAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,eAOI;AAAK,UAAA,KAAK,EAAC,QAAX;AAAA,iCACI;AAAA,2CAEA;AAAO,cAAA,IAAI,EAAC;AAAZ;AAAA;AAAA;AAAA;AAAA,oBAFA,eAGA;AAAM,cAAA,KAAK,EAAC;AAAZ;AAAA;AAAA;AAAA;AAAA,oBAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBAPJ;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAiBI;AAAK,QAAA,KAAK,EAAC,QAAX;AAAA,gCACA;AAAK,UAAA,KAAK,EAAC,KAAX;AAAA,oBACKN,OAAO,CAACO,GAAR,CAAYC,QAAQ,iBACjB;AAAK,YAAA,KAAK,EAAC,eAAX;AAAA,mCACI;AAAK,cAAA,KAAK,EAAC,YAAX;AAAA,qCACI;AAAK,gBAAA,KAAK,EAAC,YAAX;AAAA,uCACI;AAAK,kBAAA,KAAK,EAAC,MAAX;AAAA,yCACI;AAAK,oBAAA,KAAK,EAAC,cAAX;AAAA,4CACI;AAAK,sBAAA,KAAK,EAAC,cAAX;AAAA,8CACI;AAAK,wBAAA,GAAG,EAAEA,QAAQ,CAACC;AAAnB;AAAA;AAAA;AAAA;AAAA,8BADJ,eAEI;AAAK,wBAAA,KAAK,EAAC,iBAAX;AAAA,gDACI;AAAG,0BAAA,IAAI,EAAErB,IAAI,CAACoB,QAAQ,CAACnB,EAAV,CAAb;AAA4B,0BAAA,KAAK,EAAC,QAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCADJ,eAEI;AAAG,0BAAA,KAAK,EAAC,YAAT;AAAA,qCAAuBmB,QAAQ,CAACE,KAAhC;AAAA;AAAA;AAAA;AAAA;AAAA,gCAFJ,eAGI;AAAG,0BAAA,KAAK,EAAC,YAAT;AAAA,gGAAiCF,QAAQ,CAACnB,EAA1C;AAAA;AAAA;AAAA;AAAA;AAAA,gCAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,8BAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,eASI;AAAK,sBAAA,KAAK,EAAC,eAAX;AAAA,8CACI;AAAA,kCAAIC,IAAI,CAACkB,QAAD;AAAR;AAAA;AAAA;AAAA;AAAA,8BADJ,eAEI;AAAM,wBAAA,KAAK,EAAC,eAAZ;AAAA,8CAA+BhB,KAAK,CAACgB,QAAQ,CAAChB,KAAT,CAAemB,QAAf,EAAD,CAApC;AAAA;AAAA;AAAA;AAAA;AAAA,8BAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,4BATJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBADH;AADL;AAAA;AAAA;AAAA;AAAA,gBADA,eA6BH,QAAC,UAAD;AACG,UAAA,OAAO,EAAId,OADd;AAEG,UAAA,KAAK,EAAIV,IAAI,CAACyB,MAFjB;AAGG,UAAA,QAAQ,EAAEV,QAHb;AAIG,UAAA,WAAW,EAAGP;AAJjB;AAAA;AAAA;AAAA;AAAA,gBA7BG;AAAA;AAAA;AAAA;AAAA;AAAA,cAjBJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAPJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAiEH,CA3FM;;GAAMT,Y;;KAAAA,Y;AA6Fb,OAAO,MAAM2B,UAAU,GAAG,SAA4C;AAAA,MAA3C;AAAChB,IAAAA,OAAD;AAAUiB,IAAAA,KAAV;AAAiBZ,IAAAA,QAAjB;AAA0BP,IAAAA;AAA1B,GAA2C;AAClE,QAAMQ,UAAU,GAAG,EAAnB;;AACA,OAAI,IAAIY,CAAC,GAAG,CAAZ,EAAeA,CAAC,IAAIC,IAAI,CAACC,IAAL,CAAUH,KAAK,GAACjB,OAAhB,CAApB,EAA8CkB,CAAC,EAA/C,EACA;AACIZ,IAAAA,UAAU,CAACe,IAAX,CAAgBH,CAAhB;AACH;;AAED,QAAMI,QAAQ,GAAIC,MAAD,IAAY;AAAE,WAAOzB,WAAW,IAAIyB,MAAf,GAAuB,QAAvB,GAAgC,cAAvC;AAAuD,GAAtF;;AAEA,QAAMC,IAAI,GAAG,MAAI;AAAC,WAAQ1B,WAAW,IAAIQ,UAAU,CAACA,UAAU,CAACS,MAAX,GAAkB,CAAnB,CAA1B,GAAkDV,QAAQ,CAAC,CAAD,CAA1D,GAA8DA,QAAQ,CAACP,WAAW,GAAC,CAAb,CAA7E;AAA8F,GAAhH;;AACA,QAAM2B,IAAI,GAAG,MAAI;AAAC,WAAQ3B,WAAW,IAAI,CAAhB,GAAoBO,QAAQ,CAACC,UAAU,CAACA,UAAU,CAACS,MAAX,GAAkB,CAAnB,CAAX,CAA5B,GAA8DV,QAAQ,CAACP,WAAW,GAAC,CAAb,CAA7E;AAA8F,GAAhH;;AAEA,sBACQ;AAAI,IAAA,KAAK,EAAC,oBAAV;AAAA,4BACI;AAAI,MAAA,KAAK,EAAC,cAAV;AAAA,6BAAyB;AAAG,QAAA,IAAI,EAAC,IAAR;AAAa,QAAA,OAAO,EAAE,MAAI2B,IAAI,EAA9B;AAAA,+BAAkC;AAAK,UAAA,GAAG,EAAC,4EAAT;AAAsF,UAAA,KAAK,EAAC;AAA5F;AAAA;AAAA;AAAA;AAAA;AAAlC;AAAA;AAAA;AAAA;AAAA;AAAzB;AAAA;AAAA;AAAA;AAAA,YADJ,EAEKnB,UAAU,CAACI,GAAX,CAAea,MAAM,iBAClB;AAAI,MAAA,KAAK,EAAED,QAAQ,CAACC,MAAD,CAAnB;AAAA,6BAA2C;AAAG,QAAA,IAAI,EAAC,IAAR;AAAa,QAAA,OAAO,EAAE,MAAIlB,QAAQ,CAACkB,MAAD,CAAlC;AAAA,kBAA6CA;AAA7C;AAAA;AAAA;AAAA;AAAA;AAA3C,OAAmCA,MAAnC;AAAA;AAAA;AAAA;AAAA,YADH,CAFL,eAKI;AAAI,MAAA,KAAK,EAAC,cAAV;AAAA,6BAAyB;AAAG,QAAA,IAAI,EAAC,IAAR;AAAa,QAAA,OAAO,EAAE,MAAIC,IAAI,EAA9B;AAAA,+BAAkC;AAAK,UAAA,GAAG,EAAC,4EAAT;AAAsF,UAAA,KAAK,EAAC;AAA5F;AAAA;AAAA;AAAA;AAAA;AAAlC;AAAA;AAAA;AAAA;AAAA;AAAzB;AAAA;AAAA;AAAA;AAAA,YALJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADR;AASH,CArBM;MAAMR,U;AAuBb,OAAO,MAAMU,QAAQ,GAAG,MAAK;AAAA;;AACzB,QAAM;AAACC,IAAAA,OAAD;AAAUC,IAAAA;AAAV,MAAqBzC,OAAO,EAAlC;AACA,QAAM,CAACG,IAAD,EAAOuC,OAAP,IAAkB3C,QAAQ,CAAC,IAAD,CAAhC;AACA,QAAM4C,QAAQ,GAAI1C,WAAW,EAA7B;AAEA,QAAM2C,UAAU,GAAG/C,WAAW,CAAE,YAAS;AACrC,QACA;AACI,YAAMgD,OAAO,GAAG,MAAML,OAAO,CAAC,UAAD,EAAa,KAAb,EAAoB,IAApB,EAAyB,EAAzB,CAA7B;AACAE,MAAAA,OAAO,CAACG,OAAD,CAAP;AACH,KAJD,CAKA,OAAMC,CAAN,EAAQ,CAAE;AACb,GAP6B,EAO5B,CAACN,OAAD,CAP4B,CAA9B;AASA1C,EAAAA,SAAS,CAAC,MAAI;AACV8C,IAAAA,UAAU;AACb,GAFQ,EAEP,CAACA,UAAD,CAFO,CAAT;AAIA,sBACI;AAAA,cACK,CAACH,OAAD,IAAYtC,IAAZ,iBAAoB,QAAC,YAAD;AAAc,MAAA,IAAI,EAAEA;AAApB;AAAA;AAAA;AAAA;AAAA;AADzB;AAAA;AAAA;AAAA;AAAA,UADJ;AAKH,CAvBM;;IAAMoC,Q;UACkBvC,O,EAETC,W;;;MAHTsC,Q","sourcesContent":["import React,{useCallback, useEffect, useState} from \"react\";\r\nimport { useHttp } from \"../hooks/http.hook\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\n\r\nexport const MainPageCart = ({data}) => {\r\n    const link = (id) =>{return \"/apartmen/\"+id;}\r\n    const name = (data) =>{\r\n        switch(data.rooms)\r\n        {\r\n            case 1:\r\n                return 'Однокомнатная квартира';\r\n            case 2:\r\n                return 'Двухкомнатная квартира';\r\n            case 3:\r\n                return 'Трехкомнатная квартира';\r\n            case 4:\r\n                return 'Четырехкомнатная квартира';\r\n        }\r\n    }\r\n    const price = (str) =>{return str.replace(/(\\d{1,3}(?=(?:\\d\\d\\d)+(?!\\d)))/g, \"$1\" + \" \");}\r\n    \r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [perPage] = useState(6);\r\n\r\n    const LastIndex = currentPage * perPage;\r\n    const FirstIndex = LastIndex - perPage;\r\n    let current = data.slice(FirstIndex,LastIndex);\r\n\r\n    const paginate = pageNumber => setCurrentPage(pageNumber);\r\n\r\n    return(\r\n        <div>\r\n            <nav>\r\n                <div class=\"nav-wrapper colormenu menu\">\r\n                    <a href = '/'><img class=\"brand-logo logou\" src=\"https://static.tildacdn.com/tild3738-3866-4537-a335-363534343034/__white.png\"/></a>\r\n                </div>\r\n            </nav>\r\n\r\n            <div class=\"row marginT\">\r\n                <div class=\"col s3\">\r\n                    <label>Сортировать по:</label>\r\n                    <select class=\"browser-default\" value={ this.state.sortBy } onChange={ this.updateValue }>\r\n                        <option value=\"1\">Цене</option>\r\n                        <option value=\"2\">Количеству комнат</option>\r\n                        <option value=\"3\">Option 3</option>\r\n                    </select>\r\n                    <div class=\"switch\">\r\n                        <label>\r\n                        Off\r\n                        <input type=\"checkbox\"/>\r\n                        <span class=\"lever\"></span>\r\n                        On\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"col s9\">\r\n                <div class=\"row\">\r\n                    {current.map(apartmen => (\r\n                        <div class=\"col s12 m6 l4\">\r\n                            <div class=\"row centre\">\r\n                                <div class=\"col s12 m7\">\r\n                                    <div class=\"card\">\r\n                                        <div class=\"product-wrap\">\r\n                                            <div class=\"product-item\">\r\n                                                <img src={apartmen.layout_image}/>\r\n                                                <div class=\"product-buttons\">\r\n                                                    <a href={link(apartmen.id)} class=\"button\">посмотреть</a>\r\n                                                    <p class='white-text'>{apartmen.floor} этаж</p>\r\n                                                    <p class='white-text'>Квартира №{apartmen.id}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"product-title\">\r\n                                                <a>{name(apartmen)}</a>\r\n                                                <span class=\"product-price\">₽ {price(apartmen.price.toString())}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        \r\n                    ))}\r\n                </div>\r\n            {<Pagination\r\n                perPage = {perPage}\r\n                total = {data.length}\r\n                paginate={paginate}\r\n                currentPage ={currentPage}\r\n            />}\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nexport const Pagination = ({perPage, total, paginate,currentPage}) => {\r\n    const pageNumber = [];\r\n    for(let i = 1; i <= Math.ceil(total/perPage); i++)\r\n    {\r\n        pageNumber.push(i);\r\n    }\r\n\r\n    const getClass = (number) => { return currentPage == number ?'active':'waves-effect';}\r\n\r\n    const next = ()=>{return (currentPage == pageNumber[pageNumber.length-1]) ?paginate(1):paginate(currentPage+1);}\r\n    const back = ()=>{return (currentPage == 1) ?paginate(pageNumber[pageNumber.length-1]):paginate(currentPage-1);}\r\n\r\n    return(\r\n            <ul class=\"pagination flexrow\">\r\n                <li class=\"waves-effect\"><a href=\"#!\" onClick={()=>back()}><img src='https://ru.seaicons.com/wp-content/uploads/2015/06/Arrows-Forward-icon.png' class='arrowR'/></a></li>\r\n                {pageNumber.map(number => (\r\n                    <li class={getClass(number)} key ={number}><a href=\"#!\" onClick={()=>paginate(number)}>{number}</a></li>\r\n                ))}\r\n                <li class=\"waves-effect\"><a href=\"#!\" onClick={()=>next()}><img src='https://ru.seaicons.com/wp-content/uploads/2015/06/Arrows-Forward-icon.png' class='arrowL'/></a></li>\r\n            </ul>\r\n    )\r\n}\r\n\r\nexport const MainPage = () =>{\r\n    const {request, loading} = useHttp();\r\n    const [data, setData] = useState(null);\r\n    const navigate =  useNavigate();\r\n\r\n    const getDataAll = useCallback( async()=>{\r\n        try\r\n        {\r\n            const fetched = await request('/api/all', 'GET', null,{});\r\n            setData(fetched);\r\n        }\r\n        catch(e){}\r\n    },[request]);\r\n\r\n    useEffect(()=>{\r\n        getDataAll();\r\n    },[getDataAll]);\r\n\r\n    return(\r\n        <div>\r\n            {!loading && data && <MainPageCart data={data}/>}\r\n        </div>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}